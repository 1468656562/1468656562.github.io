<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>simon小📚坊</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="嗨, 我是simon">
<meta property="og:type" content="website">
<meta property="og:title" content="simon小📚坊">
<meta property="og:url" content="https://github.com/icoderRo/index.html">
<meta property="og:site_name" content="simon小📚坊">
<meta property="og:description" content="嗨, 我是simon">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="simon小📚坊">
<meta name="twitter:description" content="嗨, 我是simon">
  
    <link rel="alternate" href="/atom.xml" title="simon小📚坊" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  
  
  

</head>



  <body>


  
    <header id="header">

    
      <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">

      <!-- Support rolling -->  
        
        <section class="awSlider">
          <div class="carousel slide carousel-fade " data-ride="carousel">

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
               
                  
                    <div class="item active">
                  
                    <img id="carousel-img0" src="/css/images/home-bg.jpg">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img0 = new Image();
                      var imageTag0 = document.getElementById("carousel-img0");
                      img0.src = imageTag0.src;
                      img0.onload=function(){
                        if (img0.width / img0.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag0.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag0.style.height = document.body.clientHeight + "px";
                          imageTag0.style.marginLeft = -(document.body.clientHeight * img0.width / img0.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img1" src="/css/images/sample.jpg">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img1 = new Image();
                      var imageTag1 = document.getElementById("carousel-img1");
                      img1.src = imageTag1.src;
                      img1.onload=function(){
                        if (img1.width / img1.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag1.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag1.style.height = document.body.clientHeight + "px";
                          imageTag1.style.marginLeft = -(document.body.clientHeight * img1.width / img1.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img2" src="https://source.unsplash.com/collection/954550/1024x768">
                  </div>

                  <!-- 自适应大图 -->
                  <script>
                      var img2 = new Image();
                      var imageTag2 = document.getElementById("carousel-img2");
                      img2.src = imageTag2.src;
                      img2.onload=function(){
                        if (img2.width / img2.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag2.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag2.style.height = document.body.clientHeight + "px";
                          imageTag2.style.marginLeft = -(document.body.clientHeight * img2.width / img2.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href=".carousel" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Geri</span>
            </a>
            <a class="right carousel-control" href=".carousel" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">İleri</span>
            </a>
          </div>
        </section>
        <script>
          $('section.awSlider .carousel').carousel({
              pause: '',
              interval: 5000
          });
          var startImage = $('section.awSlider .item.active > img').attr('src');
          $('section.awSlider .carousel').on('slid.bs.carousel', function () {
              var bscn = $(this).find('.item.active > img').attr('src');
              $('section.awSlider > img').attr('src', bscn);
          });
        </script>
      

    
 


    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">simon小📚坊</a></h1>
            <h3>嗨, 我是simon</h3>
            <h5>Mr.Simon</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- 自适应主页背景大图 -->
  

 <!-- home_logo_image居中 -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="/">Startseite</a>
        
          <a id="beautifont" class="main-nav-link" href="/archives">Archive</a>
        
          <a id="beautifont" class="main-nav-link" href="/about">About</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;">
  
    <article id="[post]-RealmSwift"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/01/20/RealmSwift/">Realm-Swift3.0</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/01/20/RealmSwift/" class="article-date">
	  <time datetime="2017-01-19T16:00:00.000Z" itemprop="datePublished">2017-01-20</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="Realm-Swift3-0"><a href="#Realm-Swift3-0" class="headerlink" title="Realm-Swift3.0"></a>Realm-Swift3.0</h2><p><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fimyuw95jdj30g7083ta2.jpg" alt=""></p>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>Realm 于2014 年7月发布，是一个跨平台的移动数据库引擎，专门为移动应用的数据持久化而生。其目的是要取代 Core Data 和 SQLite,支持Java、Objective-C、JavaScript、Swift、Xamarin平台</p>
<p>Realm的优点在官方上有很多的说明, 略举两点:</p>
<p><strong>1.易上手</strong>:想比于Core Data 和SQLite, Realm的学习成本相对来说会比较低, 毫不夸张的说, 把官方的文档和Demo看完一遍, 就可以快速的上手开发功能。</p>
<p><strong>2.可视化</strong>: Realm提供了一个轻量级的数据库查看工具, 在App Store中下载<code>Realm Browser</code>, 相比于SQLite, 你可能需要去下载付费或者破解版的Navicat、SQL Manager等软件会方便很多, 借助于<code>Realm Browser</code>调试Realm数据库很便捷。</p>
<ul>
<li>使用模拟器进行调试<ul>
<li>通过执行<code>realm.configuration.fileURL</code>打印出Realm数据库的地址, Finder中跳转进对应的路径, 用<code>Realm Browser</code>打开对应的.realm文件就可以看到数据啦。</li>
</ul>
</li>
<li>使用真机调试<ul>
<li>Xcode-&gt;Window-&gt;Devices,然后找到对应的设备与项目,导出xcappdata文件后,显示包内容进入Documents,使用<code>Realm Browser</code>打开.realm文件即可.
        <!-- 
Realm-Swift3.0
简介Realm 于2014 年7月发布，是一个跨平台的移动数据库引擎，专门为移动应用的数据持久化而生。其目的是要取代 Core Data 和 SQLite,支持Java、Objective-C、JavaScript、Swift、Xamarin平台
Realm的优点在官方上有很多的说明, 略举两点:
1.易上手:想比于Core Data 和SQLite, Rea......  -->
        <p class="article-more-link">
          <a href="/2017/01/20/RealmSwift/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-Xcode8新特性"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/10/03/Xcode8新特性/">Xcode8新特性</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/10/03/Xcode8新特性/" class="article-date">
	  <time datetime="2016-10-03T03:26:31.000Z" itemprop="datePublished">2016-10-03</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>9月14日开发者们已经可以下载并使用正式版Xcode8, 借着国庆休息期间,本人也下载并使用了Xcode8, 发现里面的坑点不少.下面就总结在使用过程中遇见的一些问题.</p>
<h3 id="新特性"><a href="#新特性" class="headerlink" title="新特性"></a>新特性</h3><h4 id="General"><a href="#General" class="headerlink" title="General"></a>General</h4><p>Xcode8中通过<code>Automatically manage signing</code>, 让苹果为我们管理整数和配置文件.<br>想要设置安装后显示在手机上的APP的名字, 可以直接修改<strong>Display Name</strong>, 这个修改和<strong>Info.plist</strong>修改是同步的.<br><img src="http://ww4.sinaimg.cn/large/65e4f1e6gw1f92dmnilo1j20g20arq45.jpg" alt=""></p>
<p>手动管理证书和描述文件, 去掉<code>Automatically manage signing</code>的勾即可.<br><img src="http://ww1.sinaimg.cn/large/65e4f1e6gw1f92dn5338yj20gg0dmq4b.jpg" alt=""></p>
<h4 id="ATS问题"><a href="#ATS问题" class="headerlink" title="ATS问题"></a>ATS问题</h4><p>在iOS9中,我们可以通过设置<code>NSAllowsArbitraryLoads</code>为<code>YES</code>, 来使用HTTP网络; iOS10从2017年1月1日开始, 苹果不允许我们通过这个方法跳过ATS, 强制使用HTTPS.我们可以用过<code>NSExceptionDomains</code>对特定的域名开放HTTP.<br><img src="http://ww1.sinaimg.cn/large/65e4f1e6gw1f92dni65g2j20x007rta9.jpg" alt=""></p>
<h4 id="隐私权限的设置"><a href="#隐私权限的设置" class="headerlink" title="隐私权限的设置"></a>隐私权限的设置</h4><p>iOS10 对隐私权限更加严格, 如果不设置, 会直接崩溃.<br><img src="http://ww1.sinaimg.cn/large/65e4f1e6gw1f92dnv67gxj20zb03tjul.jpg" alt=""><br>根据错误提示: 我们可以在<code>info.plist</code>文件中 添加对应的键值就可以了.<br><img src="http://ww2.sinaimg.cn/large/65e4f1e6gw1f92do7ykoaj20w70dw0vr.jpg" alt=""></p>
<ul>
<li>麦克风权限：Privacy - Microphone Usage Description 是否允许此App使用你的麦克风？</li>
<li>相机权限： Privacy - Camera Usage Description 是否允许此App使用你的相机？<ul>
<li>相册权限： Privacy - Photo Library Usage Description 是否允许此App访问你的媒体资料库？</li>
<li>通讯录权限： Privacy - Contacts Usage Description 是否允许此App访问你的通讯录？</li>
<li>蓝牙权限：Privacy - Bluetooth Peripheral Usage Description 是否许允此App使用蓝牙？</li>
<li>语音转文字权限：Privacy - Speech Recognition Usage Description 是否允许此App使用语音识别？</li>
<li>日历权限：Privacy - Calendars Usage Description 是否允许此App使用日历？</li>
<li>定位权限：Privacy - Location When In Use Usage Description 我们需要通过您的地理位置信息获取您周边的相关数据</li>
<li>定位权限: Privacy - Location Always Usage Description 我们需要通过您的地理位置信息获取您周边的相关数据
        <!-- 
简介9月14日开发者们已经可以下载并使用正式版Xcode8, 借着国庆休息期间,本人也下载并使用了Xcode8, 发现里面的坑点不少.下面就总结在使用过程中遇见的一些问题.
新特性GeneralXcode8中通过Automatically manage signing, 让苹果为我们管理整数和配置文件.想要设置安装后显示在手机上的APP的名字, 可以直接修改Display Name, 这个......  -->
        <p class="article-more-link">
          <a href="/2016/10/03/Xcode8新特性/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/新特性/">新特性</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-编译ijkplayerDemo"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/08/27/编译ijkplayerDemo/">编译ijkplayerDemo</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/08/27/编译ijkplayerDemo/" class="article-date">
	  <time datetime="2016-08-26T16:00:00.000Z" itemprop="datePublished">2016-08-27</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a><a href="https://github.com/Bilibili/ijkplayer">下载</a></h3><p><img src="http://ww4.sinaimg.cn/large/65e4f1e6gw1f92f6xoeksj20ka0br76g.jpg" alt=""></p>
<h3 id="编译-ijkplayer"><a href="#编译-ijkplayer" class="headerlink" title="编译 ijkplayer"></a>编译 ijkplayer</h3><h4 id="下载回来后会发现-ffmpeg-lib-里面的-a文件缺失-显示为红色"><a href="#下载回来后会发现-ffmpeg-lib-里面的-a文件缺失-显示为红色" class="headerlink" title="下载回来后会发现 ffmpeg - lib 里面的.a文件缺失 显示为红色"></a>下载回来后会发现 ffmpeg - lib 里面的.a文件缺失 显示为红色</h4><p><img src="http://ww1.sinaimg.cn/large/65e4f1e6gw1f92fdqgeofj20cd097wf7.jpg" alt=""></p>
<h4 id="接着编译-ffmpeg"><a href="#接着编译-ffmpeg" class="headerlink" title="接着编译 ffmpeg"></a>接着编译 ffmpeg</h4><h5 id="打开终端-cd-到ijkplayer文件夹中-cd-ijkplayer-如下图"><a href="#打开终端-cd-到ijkplayer文件夹中-cd-ijkplayer-如下图" class="headerlink" title="打开终端, cd 到ijkplayer文件夹中 cd ijkplayer 如下图:"></a>打开终端, cd 到ijkplayer文件夹中 cd ijkplayer 如下图:</h5><p><img src="http://ww4.sinaimg.cn/large/65e4f1e6gw1f92fee7jkfj20h70g2goz.jpg" alt=""></p>
<h5 id="下载ffmpeg"><a href="#下载ffmpeg" class="headerlink" title="下载ffmpeg"></a>下载ffmpeg</h5><p> ./init-ios.sh</p>
<p><img src="http://ww3.sinaimg.cn/large/65e4f1e6gw1f92ferz68vj20jy0abjuz.jpg" alt=""></p>
<h5 id="cd到iOS目录"><a href="#cd到iOS目录" class="headerlink" title="cd到iOS目录"></a>cd到iOS目录</h5><p><img src="http://ww4.sinaimg.cn/large/65e4f1e6gw1f92fffs942j20j10chtbf.jpg" alt=""></p>
<h5 id="编译-ffmpeg"><a href="#编译-ffmpeg" class="headerlink" title="编译 ffmpeg"></a>编译 ffmpeg</h5><p>./compile-ffmpeg.sh clean<br>./compile-ffmpeg.sh all<br>等待编译完成即可</p>
<h5 id="运行IJKMediaDemo"><a href="#运行IJKMediaDemo" class="headerlink" title="运行IJKMediaDemo"></a>运行IJKMediaDemo</h5><p><img src="http://ww4.sinaimg.cn/large/65e4f1e6gw1f92ffqzrm3j20jk0bbq43.jpg" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/65e4f1e6gw1f92fg1ngm3j20jz0aut9f.jpg" alt=""><br>
        <!-- 
下载
编译 ijkplayer下载回来后会发现 ffmpeg - lib 里面的.a文件缺失 显示为红色
接着编译 ffmpeg打开终端, cd 到ijkplayer文件夹中 cd ijkplayer 如下图:
下载ffmpeg ./init-ios.sh

cd到iOS目录
编译 ffmpeg./compile-ffmpeg.sh clean./compile-ffmpeg.sh all......  -->
        <p class="article-more-link">
          <a href="/2016/08/27/编译ijkplayerDemo/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/framework/">framework</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-记IM聊天界面卡顿分析"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/08/06/记IM聊天界面卡顿分析/">记IM聊天界面卡顿分析</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/08/06/记IM聊天界面卡顿分析/" class="article-date">
	  <time datetime="2016-08-06T12:26:31.000Z" itemprop="datePublished">2016-08-06</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="开始测试"><a href="#开始测试" class="headerlink" title="开始测试"></a>开始测试</h3><p>快速滚动视图</p>
<p><img src="http://ww4.sinaimg.cn/large/006y8lVagw1f909vpp8x6j305z0argn9.jpg" alt=""></p>
<h3 id="开启GPU-Driver检测"><a href="#开启GPU-Driver检测" class="headerlink" title="开启GPU Driver检测"></a>开启GPU Driver检测</h3><p><img src="http://ww3.sinaimg.cn/large/006y8lVagw1f908hv7ia4j30kk0bkq4v.jpg" alt=""></p>
<p><img src="http://ww2.sinaimg.cn/large/006y8lVagw1f908if5qvwj30jn0hlq69.jpg" alt=""> </p>
<p>图中可以看出当前的帧率非常的低, 保持在 40~50 FPS, 明显可以感觉到卡顿.</p>
<h3 id="卡顿产生的原因"><a href="#卡顿产生的原因" class="headerlink" title="卡顿产生的原因"></a>卡顿产生的原因</h3><p><img src="http://ww2.sinaimg.cn/large/006y8lVagw1f908kgyq1ej30fp06o0tc.jpg" alt=""></p>
<p><strong>图像显示原理</strong>:<br>简单来说, CPU计算好显示的内容提交到GPU, GPU渲染完成后将渲染的结果放入帧缓冲区, 视频控制器会逐行读取帧缓冲区的数据, 进过一些转换(数模转换)传递给显示器显示.</p>
<blockquote>
<p>iOS设备目前使用的是双缓存+垂直同步, 安卓系统是三缓存+垂直同步, 感兴趣的看官, 可自行搜索.</p>
</blockquote>
<p><strong>结论</strong>:<br><img src="http://ww1.sinaimg.cn/large/006y8lVagw1f908jsi16aj30is052t91.jpg" alt=""><br>从流程图可以看出, CPU和GPU不论哪个阻碍了图像显示流程, 均会造成掉帧, 产生屏幕卡顿的现象.</p>
<blockquote>
<p>CPU: 一般处理视图的创建、布局计算、图片解码、文本的绘制、图像绘制等等.</p>
<p>GPU: 对CPU提交的内容(纹理、顶点)进行应用变换、混合、渲染. 例如:纹理的渲染、视图的混合、图形的生成.</p>
</blockquote>
<p>下面对GPU和CPU分别进行检测.</p>
<h3 id="检测GPU"><a href="#检测GPU" class="headerlink" title="检测GPU"></a>检测GPU</h3><ul>
<li><p>Renderer Utilization</p>
<blockquote>
<p>如果Renderer Utilization的百分比超过了50%, 有可能是因为离屏渲染或者是重绘导致</p>
</blockquote>
</li>
<li><p>Tiler Utilization    </p>
<blockquote>
<p>如果Tiler Utilization的百分比超过了50%, 很有可能是屏幕上有太多的图层覆盖<br><img src="http://ww2.sinaimg.cn/large/006y8lVagw1f908if5qvwj30jn0hlq69.jpg" alt=""> </p>
</blockquote>
</li>
</ul>
<p>可以判断, GPU并不是影响性能的罪魁恶首<br>
        <!-- 
开始测试快速滚动视图

开启GPU Driver检测
 
图中可以看出当前的帧率非常的低, 保持在 40~50 FPS, 明显可以感觉到卡顿.
卡顿产生的原因
图像显示原理:简单来说, CPU计算好显示的内容提交到GPU, GPU渲染完成后将渲染的结果放入帧缓冲区, 视频控制器会逐行读取帧缓冲区的数据, 进过一些转换(数模转换)传递给显示器显示.

iOS设备目前使用的是双缓存+垂直同步,......  -->
        <p class="article-more-link">
          <a href="/2016/08/06/记IM聊天界面卡顿分析/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/性能优化/">性能优化</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-netty-socket编解码"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/06/12/netty-socket编解码/">基于netty LengthFieldBasedFrameDecoder编解码</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/06/12/netty-socket编解码/" class="article-date">
	  <time datetime="2016-06-11T16:00:00.000Z" itemprop="datePublished">2016-06-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">服务器传输协议协议:  </div><div class="line">基于netty LengthFieldBasedFrameDecoder(<span class="number">100000000</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>) </div><div class="line">总长度 = <span class="number">4</span>byte + 包体内容</div><div class="line">接收二进制的json字符串</div></pre></td></tr></table></figure>
<h3 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h3><h5 id="思路"><a href="#思路" class="headerlink" title="思路:"></a>思路:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1.在发送数据包前, 拼接4个字节带有包体内容长度的数据.</div><div class="line">2.在接受数时, 需要考虑 粘包和半包的情况.根据包头长度,判断包</div><div class="line">  的完整性.将完整的包解析出去,不完整的等待下一次的数据拼接.</div></pre></td></tr></table></figure>
<h4 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1.采用面向协议的方式编码与解码</div><div class="line">2.自定义编码器和解码器, 遵守协议, 实现协议中的方法</div><div class="line">3.基于GCDAsyncSocket, 封装需要用到的方法</div></pre></td></tr></table></figure>
        <!-- 
前言1234服务器传输协议协议:  基于netty LengthFieldBasedFrameDecoder(100000000,0,4,0,4) 总长度 = 4byte + 包体内容接收二进制的json字符串
正文思路:1231.在发送数据包前, 拼接4个字节带有包体内容长度的数据.2.在接受数时, 需要考虑 粘包和半包的情况.根据包头长度,判断包  的完整性.将完整的包解析出去,不完整......  -->
        <p class="article-more-link">
          <a href="/2016/06/12/netty-socket编解码/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/socket/">socket</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-封装录音与播放"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/03/31/封装录音与播放/">录音与本地播放</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/03/31/封装录音与播放/" class="article-date">
	  <time datetime="2016-03-30T16:00:00.000Z" itemprop="datePublished">2016-03-31</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="简言"><a href="#简言" class="headerlink" title="简言"></a>简言</h3><p>近期由于要实现一个本地录音与播放的小功能, 想着把录音与播放集成在一个类中, 提供统一的接口, 方便其他同事调用.</p>
<p>AVAudioRecorder 与 AVAudioPlayer都属于音频专用类(Audio-only classes),这些类是该框架中最古老, 也是最常用的几个类.<br><img src="http://ww1.sinaimg.cn/large/65e4f1e6gw1f937o0amtdj20gp09ct8y.jpg" alt=""></p>
<h3 id="AVAudioSession"><a href="#AVAudioSession" class="headerlink" title="AVAudioSession"></a>AVAudioSession</h3><p>AVAudioSession是应用程序和操作系统之间扮演中间人的角色.规定了应用程序(app)与系统音频行为交互的规范, 一个应用程序只有一个AVAudioSession的实例.应用程序通过设置AVAudioSession的属性告诉系统想到达的效果, 系统会综合其他应用程序的AVAudioSession属性来决定硬件输入/输出. </p>
<h4 id="AVAudioSession的分类"><a href="#AVAudioSession的分类" class="headerlink" title="AVAudioSession的分类"></a>AVAudioSession的分类</h4><table>
<thead>
<tr>
<th>分类</th>
<th>作用</th>
<th>是否允许混音</th>
<th>音频输入</th>
<th>音频输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ambient</td>
<td>游戏、效率应用程序</td>
<td>☑️</td>
<td>无</td>
<td>☑️</td>
</tr>
<tr>
<td>SoloAmbient(默认)</td>
<td>游戏、效率应用程序</td>
<td>无</td>
<td>无</td>
<td>☑️</td>
</tr>
<tr>
<td>Playback</td>
<td>音频和视频播放器</td>
<td>可选</td>
<td>无</td>
<td>☑️</td>
</tr>
<tr>
<td>Record</td>
<td>录音机、音频捕捉</td>
<td>无</td>
<td>☑️</td>
<td>无</td>
</tr>
<tr>
<td>PlayAndRecord</td>
<td>VoIP、语音聊天</td>
<td>可选</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr>
<td>AudioProcessing</td>
<td>离线会话和处理</td>
<td>无</td>
<td>无</td>
<td>无</td>
</tr>
<tr>
<td>MultiRoute</td>
<td>使用外部硬件的高级A/V应用程序</td>
<td>无</td>
<td>☑️</td>
<td>☑️</td>
</tr>
</tbody>
</table>
<p>上述分类所提供的几种常见的行为可以满足大部分的场景需求, 如果还需要更复杂的功能, 其中的一些分类可以通过options和modes方法进一步自定义.</p>
<p>项目中用到了三种状态:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> (session) &#123;</div><div class="line">       <span class="keyword">case</span> audioSessionAudioRecord:</div><div class="line">           category = <span class="built_in">AVAudioSessionCategoryRecord</span>;</div><div class="line">           <span class="keyword">break</span>;</div><div class="line">       <span class="keyword">case</span> audioSessionPlay:</div><div class="line">           category = <span class="built_in">AVAudioSessionCategoryPlayback</span>;</div><div class="line">           <span class="keyword">break</span>;</div><div class="line">       <span class="keyword">default</span>:</div><div class="line">           category = <span class="built_in">AVAudioSessionCategoryAmbient</span>;</div><div class="line">           <span class="keyword">break</span>;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>初始化状态为:AVAudioSessionCategoryAmbient<br>录音状态为:AVAudioSessionCategoryRecord<br>播放状态为:AVAudioSessionCategoryPlayback<br>
        <!-- 
简言近期由于要实现一个本地录音与播放的小功能, 想着把录音与播放集成在一个类中, 提供统一的接口, 方便其他同事调用.
AVAudioRecorder 与 AVAudioPlayer都属于音频专用类(Audio-only classes),这些类是该框架中最古老, 也是最常用的几个类.
AVAudioSessionAVAudioSession是应用程序和操作系统之间扮演中间人的角色.规定了......  -->
        <p class="article-more-link">
          <a href="/2016/03/31/封装录音与播放/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AVFoundation/">AVFoundation</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-网络安全"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/01/12/网络安全/">TCP/IP网络安全(六)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/01/12/网络安全/" class="article-date">
	  <time datetime="2016-01-11T16:00:00.000Z" itemprop="datePublished">2016-01-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<p>###TCP/IP网络安全<br>TCP/IP相关的安全要素如下图所示。<br><img src="https://ws4.sinaimg.cn/large/006tNc79gy1fidg13uz9ij30qm0ks77x.jpg" alt=""></p>
<h4 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h4><p>组织机构内部的网络与互联网相连时, 为了避免内部网络受到非法访问的威胁, 会设置防火墙。</p>
<blockquote>
<p>使用NAT的情况下, 由于限定了可以从外部访问的地址, 因此也能起到防火墙的作用。</p>
</blockquote>
<p>防火墙有多种种类和形态, 专门过滤特定数据包的<strong>包过滤防火墙</strong>, 数据到达应用以后由应用处理并拒绝非法访问的应用网关。防火墙可以限制从互联网访问的主机个数; 将安全的主机和可以暴露的主机加以区分, 针对后者集中实施安全防护。</p>
<p>下图中, 对路由器设置了只向其发送特定地址和端口号的包, 也就是设置了一个包过滤防火墙。<br>当从外部过来TCP通信请求时, 只允许对Web服务器的TCP 80端口和邮件服务器的TCP 25端口访问。其他所有类型的包都会被丢弃。<br>此外, 建立TCP连接的请求只允许从内网发起, 不能从外网直接连接内网。<br><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fidghahbcdj30qq0c6n0x.jpg" alt=""></p>
<h4 id="IDS-入侵检测系统"><a href="#IDS-入侵检测系统" class="headerlink" title="IDS(入侵检测系统)"></a>IDS(入侵检测系统)</h4><p>IDS检测已经侵入内部网络进行非法访问的情况, 并及时通知给网络管理员的系统。<br>IDS根据不同的用途可以提供各种不同的功能。从设置形式上看, 一般在防火墙或DMS等边界设备上进行设置。有了这样的监控、检测边界的功能, 就可以设置在网络内部、全网或个别特殊的服务器上进行监控。<br>从功能上看, IDS有定期采集日志、长期监控、通知异常等功能。可以监控网络上流动的所有数据包, 与防火墙相辅相成。</p>
<blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fidgosnrmfj30qk09mjty.jpg" alt=""><br>
        <!-- 
###TCP/IP网络安全TCP/IP相关的安全要素如下图所示。
防火墙组织机构内部的网络与互联网相连时, 为了避免内部网络受到非法访问的威胁, 会设置防火墙。

使用NAT的情况下, 由于限定了可以从外部访问的地址, 因此也能起到防火墙的作用。

防火墙有多种种类和形态, 专门过滤特定数据包的包过滤防火墙, 数据到达应用以后由应用处理并拒绝非法访问的应用网关。防火墙可以限制从互联网访问的......  -->
        <p class="article-more-link">
          <a href="/2016/01/12/网络安全/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络/">网络</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="[post]-TCP:UDP"  class="article article-type-[post]" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/01/01/TCP:UDP/">TCP/UDP(五)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/01/01/TCP:UDP/" class="article-date">
	  <time datetime="2015-12-31T16:00:00.000Z" itemprop="datePublished">2016-01-01</time>
	</a>

      
    <a class="article-category-link" href="/categories/iOS/">iOS</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="TCP-UDP"><a href="#TCP-UDP" class="headerlink" title="TCP/UDP"></a>TCP/UDP</h3><p>TCP与UDP是传输层的两个主要协议。TCP提供可靠的通信的传输, 而UDP面向无连接的不可靠的通信传输。</p>
<p>网络层中的IP首部中有一个协议的字段, 用来标识网络层的上一层采用的是哪一种传输层的协议。根据这个字段的协议号, 就可以识别IP传输的<strong>数据部分</strong>是TCP的内容, 还是UDP的内容。同理,传输层使用端口号识别在传输层的上一层(应用层)中要进行处理的程序。</p>
<h4 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h4><p>数据链路和IP地址, 分别对应MAC地址和IP地址。前者用来识别同一链路中不同的计算机, 后者用来识别TCP/IP网络中互连的主机和路由器。在传输层中也有类似的地址概念, 那就是端口号。端口号用来识别同一台计算机中进行通信的不同应用程序, 也叫做程序地址。</p>
<h5 id="通信识别"><a href="#通信识别" class="headerlink" title="通信识别"></a>通信识别</h5><p>仅仅凭目标端口识别某一个通信是远远不够的。如下图: 1和2的通信是在两台计算机上进行的。他们的目标端口号都是80, 需要根据源端口号进行区分。3和1的目标端口号和源端口号完全相同, 但是他们各自的源IP地址不同。另外协议号不同, 也会被认为是两个不同的通信。</p>
<p>综上, TCP/IP或UDP/IP通信中通常采用5个信息来识别一个通信。分别是: <strong>源IP地址</strong>、<strong>目标IP地址</strong>、<strong>协议号</strong>、<strong>源端口号</strong>、<strong>目标端口号</strong>。只有5个信息一致, 才认为是同一个通信。<br><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fic9us8bqbj30pq0l4tf1.jpg" alt=""><br>
        <!-- 
TCP/UDPTCP与UDP是传输层的两个主要协议。TCP提供可靠的通信的传输, 而UDP面向无连接的不可靠的通信传输。
网络层中的IP首部中有一个协议的字段, 用来标识网络层的上一层采用的是哪一种传输层的协议。根据这个字段的协议号, 就可以识别IP传输的数据部分是TCP的内容, 还是UDP的内容。同理,传输层使用端口号识别在传输层的上一层(应用层)中要进行处理的程序。
端口号数据链路和I......  -->
        <p class="article-more-link">
          <a href="/2016/01/01/TCP:UDP/#more">weiter lesen</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络/">网络</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">weiter &raquo;</a>
  </nav>

</section>
        
      </div>
      
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2014 - 2017 simon小📚坊 All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>


  <script src="/js/home.js"></script>










	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            simon小📚坊
          </div>
          <div class="panel-body">
            Copyright © 2017 Mr.Simon All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
</body>
</html>